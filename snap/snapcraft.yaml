name: mapcrafter
version: 'v2.3.1-snap-alpha'
summary: High-performance Minecraft map renderer.
description: |
  High-performance Minecraft map renderer.
  Mapcrafter is a high performance Minecraft map renderer written in 
  C++ which renders your Minecraft worlds to fancy maps viewable in
  any webbrowser.

grade: devel # must be 'stable' to release into candidate/stable channels
confinement: devmode # use 'strict' once you have the right plugs and slots

apps:
  mapcrafter:
    command: bin/mapcrafter
    environment:
      LD_LIBRARY_PATH: $LD_LIBRARY_PATH:$SNAP/lib:$SNAP/usr/lib/x86_64-linux-gnu
      PATH: $PATH:$SNAP/bin:$SNAP/usr/bin
      LANG: C
  export-textures:
    command: bin/mapcrafter_textures.py
    environment:
      LD_LIBRARY_PATH: $LD_LIBRARY_PATH:$SNAP/lib:$SNAP/usr/lib/x86_64-linux-gnu
      PATH: $PATH:$SNAP/bin:$SNAP/usr/bin

parts:
  mapcrafter:
    # See 'snapcraft plugins'
    plugin: cmake
    source: https://github.com/mapcrafter/mapcrafter
    source-type: git
    source-tag: master
    build-packages: 
     - cmake
     - build-essential
     - libjpeg-turbo8-dev
     - libpng12-dev
     - libboost-iostreams-dev
     - libboost-system-dev
     - libboost-filesystem-dev
     - libboost-program-options-dev
     - libboost-test-dev
    stage-packages:
     - libboost-iostreams1.58.0
     - libboost-system1.58.0
     - libboost-filesystem1.58.0
     - libboost-program-options1.58.0
     - python-minimal
     - python2.7
     # apt-rdepends imagemagick | grep -v '^ ' | sort | xargs -n1 printf "     - %s\n"
     - coreutils
     - debconf
     - dpkg
     - fontconfig-config
     - fonts-dejavu-core
     - fonts-freefont-ttf
     - gcc-5-base
     - gcc-6-base
     - gsfonts
     - gsfonts-x11
     - hicolor-icon-theme
     - imagemagick
     - imagemagick-6.q16
     - imagemagick-common
     - libacl1
     - libattr1
     - libbz2-1.0
     - libc6
     - libexpat1
     - libffi6
     - libfftw3-double3
     - libfontconfig1
     - libfontenc1
     - libfreetype6
     - libgcc1
     - libglib2.0-0
     - libgomp1
     - libicu55
     - libjbig0
     - libjpeg8
     - libjpeg-turbo8
     - liblcms2-2
     - liblqr-1-0
     - libltdl7
     - liblzma5
     - libmagickcore-6.q16-2
     - libmagickwand-6.q16-2
     - libpcre3
     - libselinux1
     - libstdc++6
     - libtiff5
     - libx11-6
     - libx11-data
     - libxau6
     - libxcb1
     - libxdmcp6
     - libxext6
     - libxfont1
     - libxml2
     - lsb-base
     - multiarch-support
     - perl-base
     - tar
     - ttf-bitstream-vera
     - ucf
     - x11-common
     - xfonts-encodings
     - xfonts-utils
     - zlib1g

